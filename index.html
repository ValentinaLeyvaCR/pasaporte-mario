<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pasaporte de tu Muñeco</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <style>
        /* --- Configuración Global --- */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            height: 100%;
            background-color: #000;
            touch-action: manipulation;
            image-rendering: pixelated;
            font-smooth: never;
            -webkit-font-smoothing: none;
        }

        /* --- Contenedor de Páginas --- */
        .page {
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
            visibility: hidden;
            opacity: 0;
            padding: 20px;
            box-sizing: border-box;
            line-height: 1.8;
        }
        .page.active {
            visibility: visible;
            opacity: 1;
        }
        
        h1 {
            font-size: 1.5em;
            color: #fff;
            text-align: center;
            text-shadow: 2px 2px #000;
        }
        p {
            font-size: 0.8em;
            text-align: center;
        }

        /* --- Botones Dorados Estilo Mario (RETRO) --- */
        .gold-button {
            background: linear-gradient(145deg, #ffd700, #f0c000);
            border: 2px solid #b8860b;
            color: #4a2c00;
            padding: 15px 25px;
            font-size: 0.8em;
            font-family: 'Press Start 2P', cursive;
            border-radius: 8px;
            cursor: pointer;
            text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 0px #b8860b;
            transition: all 0.1s ease;
            -webkit-tap-highlight-color: transparent;
            width: 90%;
            max-width: 300px;
            text-align: center;
            margin-bottom: 15px;
        }
        .gold-button:hover {
            background: linear-gradient(145deg, #ffe033, #f5c900);
            transform: translateY(-2px);
            box-shadow: 0 6px 0px #b8860b;
        }
        .gold-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0px #b8860b;
        }
        a.gold-button {
            text-decoration: none;
            box-sizing: border-box;
        }

        /* --- Efecto Brillo Dorado --- */
        @keyframes shimmer {
            0% { filter: brightness(1); }
            50% { filter: brightness(1.5); box-shadow: 0 4px 0px #b8860b, 0 0 20px #fff; }
            100% { filter: brightness(1); }
        }
        .shimmer-button {
            animation: shimmer 2s infinite;
        }

        /* --- Efecto Rebote Mario --- */
        @keyframes mario-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .bounce-button:hover {
            animation: mario-bounce 0.5s ease;
        }
        
        /* --- Página 1: Bienvenida --- */
        #page-bienvenida {
            background-color: #5c94fc;
        }
        #page-bienvenida h1 { color: #fff; }
        #page-bienvenida .animated-message {
            font-size: 0.9em;
            color: #fff;
            opacity: 0;
            animation: fadeIn 2s ease 1s forwards;
            text-shadow: 1px 1px #000;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* --- Página 2: Portada --- */
        #page-portada {
            background: linear-gradient(to bottom, #fff, #faf8f0);
        }
        #page-portada .logo {
            width: 250px;
            max-width: 80%;
            animation: logoGlow 2s infinite alternate;
        }
        #page-portada h1 {
            color: #4a2c00;
            text-shadow: 1px 1px #ffd700;
        }

        @keyframes logoGlow {
            from { filter: drop-shadow(0 0 5px #ffd700); }
            to { filter: drop-shadow(0 0 20px #ffeb3b); }
        }

        /* --- Página 3: Historia (Mobile-First) --- */
        #page-historia {
            background-color: #a02c2c;
            background-image: linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 20px 10px;
            overflow-y: auto;
            justify-content: flex-start;
        }
        .historia-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
        }
        .historia-container img {
            width: 180px;
            filter: drop-shadow(3px 3px 0 rgba(0,0,0,0.3));
            margin-top: 0px;
        }
        .cuento-bloque {
            background: rgba(255, 255, 255, 0.9);
            border: 4px solid #000;
            border-radius: 8px;
            padding: 15px;
            width: 90%;
            max-width: 500px;
            font-size: 0.7em;
            line-height: 1.8;
            color: #333;
            text-align: left;
        }
        .cuento-bloque strong { color: #a02c2c; }
        .historia-botones {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            align-items: center;
            padding-bottom: 30px;
        }

        /* -- Ventana Sorpresa (Mobile) -- */
        #sorpresa-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(160, 44, 44, 0.85);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            visibility: hidden;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 100;
            padding: 20px;
            box-sizing: border-box;
        }
        #sorpresa-popup.active {
            visibility: visible;
            opacity: 1;
        }
        .sorpresa-content {
            position: relative;
            padding: 30px 20px;
            border: 5px solid #ffd700;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }
        #typewriter-text {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.1em;
            color: #fff;
            line-height: 1.8;
            text-shadow: 2px 2px #000;
        }
        .close-popup {
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 40px;
            color: #ffd700;
            cursor: pointer;
            background: none;
            border: none;
            font-family: Arial, sans-serif;
            width: auto;
            box-shadow: none;
            margin-bottom: 0;
        }
        /* -- Lluvia de Monedas -- */
        @keyframes fall {
            0% { top: -10%; }
            100% { top: 110%; }
        }
        .coin {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ffd700;
            border-radius: 50%;
            border: 2px solid #b8860b;
            animation: fall linear infinite;
            top: -10%;
        }

        /* --- Página 4: Cierre --- */
        #page-cierre {
            background-color: #2c2c2c;
            overflow-y: auto;
            justify-content: center; /* Vuelve a centrar, ya hay espacio */
            padding-top: 50px;
            padding-bottom: 50px;
        }
        #page-cierre .logo {
            width: 200px;
            max-width: 70%;
        }
        #page-cierre .lema {
            font-size: 0.8em;
            color: #ccc;
            margin-top: -15px;
        }
        #page-cierre .frase-final {
            font-size: 0.9em;
            color: #ffd700;
            margin-top: 30px;
            margin-bottom: 30px;
            text-shadow: 1px 1px #000;
        }

        /* --- PÁGINA 5: CERTIFICADO --- */
        #page-certificado {
            background: #fdf5e6;
            overflow-y: auto;
            justify-content: flex-start;
        }
        .certificado-content {
            width: 95%;
            max-width: 700px;
            background: #fff;
            border: 10px solid #b8860b;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            color: #333;
            margin-top: 20px;
        }
        .certificado-content h1 {
            color: #b8860b;
            font-size: 1.2em;
            text-shadow: none;
        }
        .certificado-body {
            font-size: 0.8em;
            line-height: 2;
            margin-top: 20px;
            margin-bottom: 30px;
        }
        .campo-rellenable {
            font-weight: bold;
            color: #000;
            font-size: 1.1em;
            background: #eee;
            padding: 5px;
            border-radius: 5px;
        }
        
        /* --- @MEDIA QUERY: Estilos para Desktop (Pantallas > 768px) --- */
        @media (min-width: 768px) {
            h1 { font-size: 2.5em; }
            p { font-size: 1em; }
            
            .gold-button { width: auto; max-width: none; }
            .close-popup { width: auto; }

            #page-bienvenida .animated-message { font-size: 1.2em; }
            #page-portada .logo { width: 300px; }
            #page-historia { overflow-y: hidden; justify-content: center;}
            .historia-container {
                flex-direction: row;
                gap: 30px;
                padding: 40px;
                max-width: 1000px;
                justify-content: center;
            }
            .historia-container img { width: 300px; margin-top: 0; }
            .cuento-bloque {
                width: 500px;
                font-size: 0.8em;
                padding: 30px;
            }
            .historia-botones {
                flex-direction: row;
                gap: 20px;
                width: auto;
                padding-bottom: 0;
            }
            
            .sorpresa-content {
                width: auto;
                padding: 50px;
            }
            #typewriter-text { font-size: 1.5em; }
            
            #page-cierre {
                overflow-y: hidden;
                justify-content: center;
                padding-top: 20px;
                padding-bottom: 20px;
            }
            #page-cierre .logo { width: 250px; }
            #page-cierre .lema { font-size: 1em; }
            #page-cierre .frase-final { font-size: 1.5em; }
            
            .certificado-content { width: 700px; padding: 40px; margin-top: 0;}
            .certificado-content h1 { font-size: 2em; }
            .certificado-body { font-size: 1em; }
        }
    </style>
</head>
<body>

    <div id="page-bienvenida" class="page active">
        <h1>Hola, soy tu Trapito de Luz version Mario</h1>
        <p class="animated-message">Gracias por descubrirme…</p>
        <button id="btn-comenzar" class="gold-button shimmer-button">Comenzar</button>
    </div>

    <div id="page-portada" class="page">
        <img src="logo.png" alt="Logo Trapo de Luz" class="logo">
        <h1>Pasaporte de tu muneco</h1>
        <button id="btn-entrar" class="gold-button">Entrar</button>
    </div>

    <div id="page-historia" class="page">
        <div class="historia-container">
            <img src="mario.png" alt="Muñeco Mario">
            <div class="cuento-bloque">
                <p><strong>¡ALERTA, HEROE!</strong></p>
                <p>El malvado Bowser y su tribu Koopa... ¡han invadido el Reino Champiñon!</p>
                <p>Usando su magia negra, han convertido a la pacifica gente Champiñon en... ¡ladrillos y piedras!</p>
                <p><strong>¡QUE HORROR!</strong></p>
                <p>La unica que puede salvarlos es la Princesa Toadstool, pero... ¡HA SIDO SECUESTRADA!</p>
                <p>Mario, tu 'Trapito de Luz', ha escuchado la llamada.</p>
                <p><strong>¡Tu mision: ¡Derrotar a Bowser, salvar a la princesa y restaurar el reino!</strong></p>
            </div>
        </div>
        
        <div class="historia-botones">
            <button id="btn-certificado" class="gold-button">📜 Ver Certificado</button>
            <button id="btn-sorpresa" class="gold-button">🎁 Sorpresa</button>
            
            <a href="https://www.instagram.com/trapodeluz/" target="_blank" class="gold-button">
                ¡Mira mas personajes! 📸
            </a>
        </div>
    </div>

    <div id="page-cierre" class="page">
        <img src="logo.png" alt="Logo Trapo de Luz" class="logo">
        <p class="lema">"Cada trapo, una historia; cada historia, una sonrisa."</p>
        <p class="frase-final">Gracias por adoptar un pedacito de luz ✨</p>
        <button id="btn-inicio" class="gold-button bounce-button">🏠 Volver al inicio</button>
        
        </div>

    <div id="page-certificado" class="page">
        <div class="certificado-content">
            <h1>CERTIFICADO DE ADOPCION</h1>
            <div class="certificado-body">
                Este certificado acredita que
                <br>
                <span class="campo-rellenable">[NOMBRE DEL ADOPTANTE]</span>
                <br>
                ha adoptado oficialmente a
                <br>
                <span class="campo-rellenable">[NOMBRE DEL MUÑECO]</span>
                <br>
                el
                <br>
                <span class="campo-rellenable">[FECHA DE AVENTURA]</span>
            </div>
            <button id="btn-volver-historia" class="gold-button">Volver</button>
        </div>
    </div>

    <div id="sorpresa-popup">
        <div id="coin-container"></div>
        <div class="sorpresa-content">
            <button class="close-popup" id="btn-cerrar-popup">&times;</button>
            <div id="typewriter-text"></div>
        </div>
    </div>


    <audio id="sound-background" src="https://archive.org/download/SuperMarioBros.ThemeMusic/SuperMarioBros.mp3" loop preload="auto"></audio>
    <audio id="sound-magic" src="https://assets.mixkit.co/sfx/preview/mixkit-fairy-magic-sparkle-879.mp3" preload="auto"></audio>
    <audio id="sound-coin" src="https://www.sm128c.com/download/smb-coin.mp3" preload="auto"></audio>
    <audio id="sound-jump" src="https://audio.com/thebestcoder565738/audio/super- mario-jump-sound-effect.mp3" preload="auto"></audio>


    <script>
        /* --- Lógica de Navegación y Sonidos --- */
        const pages = document.querySelectorAll('.page');
        const btnComenzar = document.getElementById('btn-comenzar');
        const btnEntrar = document.getElementById('btn-entrar');
        const btnSorpresa = document.getElementById('btn-sorpresa');
        const btnInicio = document.getElementById('btn-inicio');
        const btnCerrarPopup = document.getElementById('btn-cerrar-popup');
        const popup = document.getElementById('sorpresa-popup');
        
        const btnCertificado = document.getElementById('btn-certificado');
        const btnVolverHistoria = document.getElementById('btn-volver-historia');
        
        const soundMagic = document.getElementById('sound-magic');
        const soundCoin = document.getElementById('sound-coin');
        const soundJump = document.getElementById('sound-jump');
        const soundBackground = document.getElementById('sound-background');
        
        soundBackground.volume = 0.3; 

        function goToPage(pageId) {
            pages.forEach(page => {
                page.classList.remove('active');
            });
            const newPage = document.getElementById(pageId);
            newPage.classList.add('active');
            newPage.scrollTop = 0;
        }

        function playSound(sound) {
            var promise = sound.play();
            if (promise !== undefined) {
                promise.then(_ => {
                    sound.currentTime = 0;
                }).catch(error => {
                    console.log("Reproducción bloqueada. Se requiere interacción.");
                });
            }
        }
        
        function unlockAudio() {
            soundMagic.play(); soundMagic.pause(); soundMagic.currentTime = 0;
            soundCoin.play(); soundCoin.pause(); soundCoin.currentTime = 0;
            soundJump.play(); soundJump.pause(); soundJump.currentTime = 0;
            soundBackground.play(); soundBackground.pause(); soundBackground.currentTime = 0;
            
            document.body.removeEventListener('click', unlockAudio);
            document.body.removeEventListener('touchstart', unlockAudio);
        }
        document.body.addEventListener('click', unlockAudio);
        document.body.addEventListener('touchstart', unlockAudio);

        /* --- Eventos de Botones --- */
        
        btnComenzar.addEventListener('click', (e) => {
            e.stopPropagation();
            playSound(soundMagic);
            
            if (soundBackground.paused) {
                soundBackground.play().catch(e => console.log("Error al iniciar música de fondo"));
            }
            
            goToPage('page-portada');
        });

        btnEntrar.addEventListener('click', (e) => {
            e.stopPropagation();
            playSound(soundCoin);
            goToPage('page-historia');
        });

        btnInicio.addEventListener('click', (e) => {
            e.stopPropagation();
            playSound(soundJump);
            setTimeout(() => {
                goToPage('page-bienvenida');
            }, 300);
        });
        
        /* Lógica de la Sorpresa */
        btnSorpresa.addEventListener('click', (e) => {
            e.stopPropagation();
            playSound(soundCoin);
            popup.classList.add('active');
            startCoinRain();
            
            const textoSorpresa = "Recuerda: ¡Tu eres el verdadero heroe!<br>¡POWER-UP! Has ganado un 10% de descuento en tu proximo Trapito de Luz.";
            startTypewriter(textoSorpresa, 'typewriter-text');
        });

        btnCerrarPopup.addEventListener('click', (e) => {
            e.stopPropagation();
            popup.classList.remove('active');
            stopCoinRain();
        });
        
        /* Lógica del Certificado */
        btnCertificado.addEventListener('click', (e) => {
            e.stopPropagation();
            playSound(soundCoin);
            goToPage('page-certificado');
        });
        
        btnVolverHistoria.addEventListener('click', (e) => {
            e.stopPropagation();
            playSound(soundCoin);
            goToPage('page-historia');
        });
        
        /* --- Funciones de Efectos --- */

        function startTypewriter(txt, elementId) {
            let i = 0;
            const speed = 70;
            const target = document.getElementById(elementId);
            target.innerHTML = '';
            
            function type() {
                // Corrección para que <br> funcione
                if (txt.substring(i, i + 4).toLowerCase() === '<br>') {
                    target.innerHTML += '<br>';
                    i += 4;
                }
                
                if (i < txt.length) {
                    target.innerHTML += txt.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        const coinContainer = document.getElementById('coin-container');
        let rainInterval;

        function startCoinRain() {
            stopCoinRain();
            rainInterval = setInterval(createCoin, 100);
        }

        function stopCoinRain() {
            clearInterval(rainInterval);
            coinContainer.innerHTML = '';
        }

        function createCoin() {
            const coin = document.createElement('div');
            coin.classList.add('coin');
            coin.style.left = Math.random() * 100 + 'vw';
            coin.style.animationDuration = (Math.random() * 2) + 3 + 's';
            coinContainer.appendChild(coin);
            setTimeout(() => {
                coin.remove();
            }, 5000);
        }
    </script>
</body>
</html>